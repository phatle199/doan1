extends ../account

//- mixin details(field, content)
//-   .row
//-     .col-4
//-       h6= field
//-     .col-7
//-       p= content
  
//- mixin pageItem(pageNumber)
//-   - const isActive = currentPage === pageNumber
//-   li(class=`page-item ${isActive ? 'active' : ''}`)
//-     a.page-link.page-number(href=`/me/manage-bookings?page=${pageNumber}`)= pageNumber

block userview
  //- - currentPage = currentPage < 1 ? 1 : currentPage
  p.text-center.display-4 REPORT

  a.btn.btn-primary.mb-3(href="/me/manage-bookings") View all booking details
  table.table.table-hover
      thead.thead-dark
        th #
        th Tour
        th Start date
        th Number of people booked
        th Approved order quantity
        th Amount
      tbody
        - let i = 0;
        each item in data
          - i++;
          tr
            td= i
            td= item.tourName
            td= item.startDate.toLocaleDateString()
            td= `${item.ticketsQuantity}/${item.maxGroupSize}`
            td= item.approvedOrderQuantity
            td= `${item.amount} USD`

  //- // PAGINATION
  //- nav(aria-label="Page navigation example")
  //-   ul.pagination.justify-content-center

  //-     li.page-item#previous
  //-       a.page-link(href="#" aria-label="Previous")
  //-         span(aria-hidden="true") &laquo;
  //-         span.sr-only Previous

  //-     - let pageNumber = currentPage
  //-     - const left = currentPage > 0 && currentPage < pageSize - 1
  //-     - const overPageNumber = currentPage > pageSize || currentPage < 1
      
  //-     if overPageNumber
  //-       +pageItem(1)
  //-       +pageItem(2)
  //-       +pageItem(3)
  //-     else
  //-       if left
  //-         +pageItem(pageNumber)
  //-         +pageItem(pageNumber + 1)
  //-         +pageItem(pageNumber + 2)
  //-       else
  //-         +pageItem(pageNumber - 2)
  //-         +pageItem(pageNumber - 1)
  //-         +pageItem(pageNumber)      

  //-     li.page-item#next(data-page-size=`${pageSize}`)
  //-       a.page-link(href="#" aria-label="Next")
  //-         span(aria-hidden="true") &raquo;
  //-         span.sr-only Next
  